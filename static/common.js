function ReplaceCurrentHistoryUrl(t,e,i){if(i&&"function"==typeof window.history.replaceState)try{window.history.replaceState(t,e,i)}catch(t){}}function MakeRequest(t,e,i,n){var s=jQuery.Deferred(),a=s.promise(),o="json";!$.support.cors&&$.ajaxSettings.crossDomain&&(o="jsonp");o=jQuery.ajax({type:"POST",url:t,data:e,jsonp:"jsonp_callback",dataType:o});return o.done(function(t,e,i){var n=t.message||t.data||t;200==t.code?s.resolveWith(this,[n,e,i]):s.rejectWith(this,[n,"responseerror",i])}).fail(function(){s.rejectWith(this,arguments)}),jQuery.isFunction(i)&&a.done(i),jQuery.isFunction(n)&&a.fail(n),jQuery.isFunction(window.ShowError)&&a.fail(function(t,e){"responseerror"==e&&"string"==typeof t&&ShowError(t)}),a.abort=o.abort,a}function GetCookieOptions(){var t={path:"/",expires:300},e=window.location.host||"";return-1<e.lastIndexOf(".md")?t.domain=".fest.md":-1<e.lastIndexOf(".ro")&&(t.domain=".fest.ro"),t}function ShowGlobalSpinner(){$("body").append('<div class="circle-spinner-overlay"><div class="circle-spinner"></div></div>')}function HideGlobalSpinner(){$(".spinner-overlay").remove()}function LogoutUser(){MakeRequest("/api/LogoutUser.php").done(function(t){var e=$.Event("logout.auth");$(document).trigger(e,[t]),e.isDefaultPrevented()||window.location.reload(!0)})}function SwitchLoginRegisterForms(){var t=$(this).closest(".formsLoginRegister");t.length||(t=$("#formLoginOrRegister")),t.find(".form-wrap").toggleClass("active"),t.find(".btns-switch button").toggleClass("active")}!function(n){"use strict";n.fn.emulateTransitionEnd=function(t){var e=!1,i=this;n(this).one("bsTransitionEnd",function(){e=!0});return setTimeout(function(){e||n(i).trigger(n.support.transition.end)},t),this},n(function(){n.support.transition=function(){var t,e=document.createElement("bootstrap"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in i)if(void 0!==e.style[t])return{end:i[t]};return!1}(),n.support.transition&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(s){"use strict";function n(t){s(t).on("click.bs.dropdown",this.toggle)}var a="[data-toggle=dropdown]";function o(i){s(".dropdown-backdrop").remove(),s(a).each(function(){var t=r(s(this)),e={relatedTarget:this};t.hasClass("open")&&(t.trigger(i=s.Event("hide.bs.dropdown",e)),i.isDefaultPrevented()||t.removeClass("open").trigger("hidden.bs.dropdown",e))})}function r(t){var e=t.attr("data-target"),e=(e=e||(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""))&&s(e);return e&&e.length?e:t.parent()}n.prototype.toggle=function(t){var e=s(this);if(!e.is(".disabled, :disabled")){var i=r(e),n=i.hasClass("open");if(o(),!n){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&s('<div class="dropdown-backdrop"/>').insertAfter(s(this)).on("click",o);n={relatedTarget:this};if(i.trigger(t=s.Event("show.bs.dropdown",n)),t.isDefaultPrevented())return;i.toggleClass("open").trigger("shown.bs.dropdown",n),e.focus()}return!1}},n.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var e=s(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var i=r(e),n=i.hasClass("open");if(!n||n&&27==t.keyCode)return 27==t.which&&i.find(a).focus(),e.click();e=" li:not(.divider):visible a",i=i.find("[role=menu]"+e+", [role=listbox]"+e);i.length&&(e=i.index(i.filter(":focus")),38==t.keyCode&&0<e&&e--,40==t.keyCode&&e<i.length-1&&e++,~e||(e=0),i.eq(e).focus())}}};var t=s.fn.dropdown;s.fn.dropdown=function(i){return this.each(function(){var t=s(this),e=t.data("bs.dropdown");e||t.data("bs.dropdown",e=new n(this)),"string"==typeof i&&e[i].call(t)})},s.fn.dropdown.Constructor=n,s.fn.dropdown.noConflict=function(){return s.fn.dropdown=t,this},s(document).on("click.bs.dropdown.data-api",o).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",a,n.prototype.toggle).on("keydown.bs.dropdown.data-api",a+", [role=menu], [role=listbox]",n.prototype.keydown)}(jQuery),function(a){"use strict";function o(t,e){this.options=e,this.$element=a(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}o.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},o.prototype.toggle=function(t){return this[this.isShown?"hide":"show"](t)},o.prototype.show=function(i){var n=this,t=a.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(t),this.isShown||t.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var t=a.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show().scrollTop(0),t&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:i});t?n.$element.find(".modal-dialog").one(a.support.transition.end,function(){n.$element.focus().trigger(e)}).emulateTransitionEnd(300):n.$element.focus().trigger(e)}))},o.prototype.hide=function(t){t&&t.preventDefault(),t=a.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},o.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.focus()},this))},o.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},o.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden.bs.modal")})},o.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},o.prototype.backdrop=function(t){var e,i=this.$element.hasClass("fade")?"fade":"";this.isShown&&this.options.backdrop?(e=a.support.transition&&i,this.$backdrop=a('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),t&&(e?this.$backdrop.one(a.support.transition.end,t).emulateTransitionEnd(150):t())):!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var t=a.fn.modal;a.fn.modal=function(n,s){return this.each(function(){var t=a(this),e=t.data("bs.modal"),i=a.extend({},o.DEFAULTS,t.data(),"object"==typeof n&&n);e||t.data("bs.modal",e=new o(this,i)),"string"==typeof n?e[n](s):i.show&&e.show(s)})},a.fn.modal.Constructor=o,a.fn.modal.noConflict=function(){return a.fn.modal=t,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var e=a(this),i=e.attr("href"),n=a(e.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),i=n.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(i)&&i},n.data(),e.data());e.is("a")&&t.preventDefault(),n.modal(i,this).one("hide",function(){e.is(":visible")&&e.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery),function(s){"use strict";var i;s(document).on("show.bs.modal",function(){var t=function(){if(i)return i;var t=document.createElement("div");t.className="scrollbar-measure",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e&&(i=e),e}();t&&s(document.body).css("margin-right",t)}).on("hidden.bs.modal",function(){e.active?s(document.body).addClass("modal-open"):s(document.body).css("margin-right","")});function a(t,e){this.element=s(t),this.options=e,this.isShown=!1}a.DEFAULTS={animate:!1,closeBtn:!0,container:null,toggleDisplay:!1},a.Template=s('<div class="modal" role="dialog" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><div class="modal-placeholder"></div></div></div></div></div>'),a.CloseButton=s('<button type="button" class="close" data-dismiss="modal">&times;</button>'),a.prototype.prepare=function(){var t;this.wrapper||(this.wrapper=a.Template.clone(),this.placeholder=this.wrapper.find(".modal-placeholder"),this.options.closeBtn&&this.wrapper.find(".modal-body").prepend(a.CloseButton.clone()),this.options.animate&&this.wrapper.addClass("fade"),(t=this.options.container&&s(this.options.container)||this.element).is("body")?this.wrapper.appendTo(t):this.wrapper.insertAfter(t),this.wrapper.on("show.bs.modal",s.proxy(this.onShow,this)).on("hidden.bs.modal",s.proxy(this.onHide,this)).on("show.bs.modal shown.bs.modal hide.bs.modal hidden.bs.modal",s.proxy(this.onEvent,this)))},a.prototype.show=function(){var t;this.isShown||(this.prepare(),t={width:this.element.width(),height:this.element.height()},this.placeholder.css(t).insertAfter(this.element),this.element.appendTo(this.wrapper.find(".modal-body")),e.onShow(this),this.wrapper.modal(this.options))},a.prototype.hide=function(){this.wrapper&&this.isShown?this.wrapper.modal("hide"):e.remove(this)},a.prototype.onShow=function(t){this.isShown=!0,this.options.toggleDisplay&&this.element.show()},a.prototype.onEvent=function(t){var e=s.Event(t.type+".modalwrapper");this.element.trigger(e),e.isDefaultPrevented()&&t.preventDefault()},a.prototype.onHide=function(){this.isShown=!1,this.element.insertAfter(this.placeholder),this.placeholder.appendTo(this.wrapper.find(".modal-body")),e.onHide(this),this.options.toggleDisplay&&this.element.hide()},s.fn.modalwrapper=function(n){return this.each(function(){var t,e=s(this),i=e.data("modalwrapper");i||(t=s.extend({},a.DEFAULTS,e.data(),"object"==typeof n&&n),i=new a(this,t),e.data("modalwrapper",i)),"string"==typeof n&&i[n]()})};function t(){this.stack=[],this.active=void 0}var e=new t;t.prototype.onShow=function(t){var e=this.active;this.active=t,e&&e!=t&&(this.stack.push(e),e.hide())},t.prototype.onHide=function(t){this.active==t&&(this.active=this.stack.pop(),this.active&&(this.active.show(),setTimeout(function(){s("body").addClass("modal-open")},0)))},t.prototype.remove=function(t){t=this.indexAt(t);0<=t&&this.stack.splice(t,1)},t.prototype.indexAt=function(t){for(var e=this.stack.length-1;0<=e;e--)if(this.stack[e]==t)return e;return-1}}(jQuery),function(s){"use strict";function a(t,e){this.el=t,this.target=e}var i="active";a.prototype.show=function(){var t=this.el,e=this.target;t.siblings(".tab").removeClass(i),t.addClass(i),e.siblings(".tab-panel").removeClass(i),e.addClass(i),t.trigger("show.tabitem")};var t=s.fn.tabitem;s.fn.tabitem=function(n){return this.each(function(){var t,e=s(this),i=e.data("tabitem");i||(t=e.data("tabtarget")||e.attr("data-tabtarget"),t=s("#"+t),i=new a(e,t),e.data("tabitem",i)),"string"==typeof n&&i[n]&&i[n]()})},s.fn.tabitem.Constructor=a,s.fn.noConflict=function(){return s.fn.tabitem=t,this},s(document).on("click",".tabber > .tab",function(t){var e=s(this);e.parent().data("ignore")||(t.preventDefault(),e.tabitem("show"))})}(jQuery),function(a){"use strict";function s(t,e){this.$select=a(t),this.options=e,this.multiple=this.$select.prop("multiple"),this.options.title=this.options.title||"&nbsp;",this.$element=this.render().insertAfter(this.$select.hide()),this.$toggler=this.$element.find("button"),e=(e=this.$select.attr("class")).replace("selectbox",""),this.$element.addClass(e),this.$list=this.$element.find("ul"),this.$items=[],this.registerListeners(),this.update(),this.refresh()}s.DEFAULT_OPTIONS={size:"auto",title:null,titleLengthLimit:30,selectedFormatter:null},s.closeAll=function(){a(".selectbox>.open").removeClass("open")},s.prototype.render=function(){var t='<div class="selectbox dropdown">';return t+='<button type="button" class="form-control box-toggle dropdown-toggle" data-toggle="dropdown"><span class="select-title">'+this.options.title+'</span><span class="caret"></span></button>',t+='<ul role="menu" class="dropdown-menu'+(this.multiple?" multiple":"")+'"></ul>',a(t+="</div>")},s.prototype.val=function(t){return void 0===t?this.$select.val():(this.$select.val(t),this)},s.prototype.disabled=function(t){if(void 0===t)return this.$select.prop("disabled");t=!!t;return this.$select.prop("disabled",t),this.$element.add(this.$toggler).toggleClass("disabled",t),this},s.prototype.update=function(){var n=[];return this.$select.find("option").each(function(){var t=a(this),e=t.attr("class"),i="";e&&e.length&&(i+=' class="'+e+'"');t="<li"+i+'><a tabindex="-1">'+t.html()+"</a></li>";n.push(t)}),this.$items=a(n.join("")).appendTo(this.$list.empty()),this},s.prototype.setSelected=function(t,e){this.$items.eq(t).toggleClass("selected",e)},s.prototype.setDisabled=function(t,e){this.$items.eq(t).toggleClass("disabled",e)},s.prototype.refresh=function(){var i=this;i.disabled(i.$select.prop("disabled"));var t=i.$select.find("option").each(function(t){var e=a(this);e.is(".delesect")||(i.setSelected(t,e.is(":selected")),i.setDisabled(t,e.is(":disabled")))}),e=[];return t.not(".deselect").filter(":selected").each(function(){e.push(a(this).html())}),t=e.length?i.formatTitle(e):this.options.title,i.$toggler.find(".select-title").empty().append(t),this},s.prototype.formatTitle=function(t){for(var e=this.options.titleLengthLimit||0,i=[],n=-2,s=0,a=t.length;s<a;s++)if(i.push(t[s]),e<(n+=t[s].length+2)&&0<e&&0<s){i.push("...");break}return i.join(", ")},s.prototype.registerListeners=function(){var s=this;this.$list.on("click","li a",function(t){t.preventDefault();var e=a(this).closest("li"),i=s.$items.index(e),n=s.$select.find("option"),i=n.eq(i);s.multiple?(e.is(".deselect")?n.prop("selected",!1):(e=i.prop("selected"),i.prop("selected",!e),t.stopPropagation()),s.$toggler.focus()):(n.prop("selected",!1),i.prop("selected",!0)),s.$select.trigger("change")}),this.$select.on("change",function(){s.refresh()}).on("refresh",function(){s.update(),s.refresh()})};var t=a.fn.selectbox;a.fn.selectbox=function(n){return this.each(function(){var t,e=a(this),i=e.data("selectbox");i||(t=a.extend({},s.DEFAULT_OPTIONS,e.data(),"object"==typeof n&&n),i=new s(this,t),e.data("selectbox",i)),"string"==typeof n&&i[n]()})},a.fn.selectbox.Constructor=s,a.fn.noConflict=function(){return a.fn.selectbox=t,this}}(jQuery),function(s){"use strict";function a(t,e){this.$select=t,this.options=e,this.multiple=this.$select.prop("multiple"),this.create(),e=this.$select.attr("class"),this.$element.addClass(e),this.listen(),this.refresh()}a.DEFAULT_OPTIONS={placeholder:""},a.prototype.create=function(){var t="selectbtn"+(this.multiple?" multiple":"");this.$select.wrap('<div class="'+t+'"></div>'),this.$element=this.$select.parent();t='<span class="select-title">'+(this.options.placeholder||"")+"</span>"+(this.multiple?'<span class="selected-count"></span>':"")+'<span class="caret"></span>';s(t).insertBefore(this.$select)},a.prototype.listen=function(){var t=this;this.$select.on("change",function(){t.refresh()}).on("refresh",function(){t.refresh()})},a.prototype.refresh=function(){this.$element.toggleClass("disabled",!!this.$select.prop("disabled"));var t=this.$select.find("option"),e=[];t.not(".deselect").filter(":selected").each(function(){e.push(s(this).html())}),t=e.length?this.formatTitle(e):this.options.placeholder,this.$element.find(".select-title").empty().append(t),this.multiple&&(this.$element.toggleClass("empty",!e.length),t=1<e.length?e.length+"":"",this.$element.find(".selected-count").text(t).toggleClass("shown",!!t))},a.prototype.val=function(t){return void 0===t?this.$select.val():(this.$select.val(t),this)},a.prototype.formatTitle=function(t){return t.join(", ")};var t=s.fn.selectbtn;s.fn.selectbtn=function(n){return this.each(function(){var t,e=s(this),i=e.data("selectbtn");i||(t=s.extend({},a.DEFAULT_OPTIONS,e.data(),"object"==typeof n&&n),i=new a(s(this),t),e.data("selectbtn",i)),"string"==typeof n&&i[n]()})},s.fn.selectbtn.Constructor=a,s.fn.noConflict=function(){return s.fn.selectbtn=t,this}}(jQuery),$(function(){$("#languages, body.fullscreen .map-bar .languages").on("click","a",function(t){var e=$(this).data("lang");return e&&$.cookie("lang",e,GetCookieOptions()),!0}),$("#cities").on("click",".city",function(t){var e=$(this).data("city");e&&$.cookie("city",e,GetCookieOptions())}),$("#left-menu").on("click",".accordion .menu-item",function(t){t.preventDefault();var e=$(this).closest(".accordion");return e.hasClass("expanded")?e.find("ul").stop(!1,!0).animate({height:"toggle"},function(){e.removeClass("expanded").addClass("collapsed")}):(e.removeClass("collapsed").addClass("expanded"),e.find("ul").stop(!1,!0).animate({height:"toggle"},"fast")),!1}),$(document).on("click",".view-more",function(t){var e,i=$(this),n=$(i.data("target"));n&&n.length&&((!(e=parseInt(i.data("limit")))||!isFinite(e)||e<=0||e>=n.length)&&(e=null),t.preventDefault(),e&&(n=n.slice(0,e)),n.show().removeClass("toggled-hidden"),e||i.hide())}),$.fn.clearable=function(){return this.each(function(){var t=$(this).filter("input");t.length&&!t.data("clearable")&&(t.data("clearable",!0),t.addClass("clearable").on("textchange.clearable",function(t,e,i){$(this).toggleClass("x",!!i)}).on("mousemove.clearable",function(t){var e,i,n=$(this);n.is(".clearable.x")&&(i=this.getBoundingClientRect(),e=parseInt(n.css("padding-right")),i=this.offsetWidth-e<t.clientX-i.left,n.toggleClass("over-x",i))}).on("click.clearable",function(){var t=$(this);t.is(".clearable.x.over-x")&&t.removeClass("x over-x").val("").trigger("change")}))})}}),function(t){"use strict";t.Placeholders={Utils:{addEventListener:function(t,e,i){return t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):void 0},inArray:function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return!0;return!1},moveCaret:function(t,e){var i;t.createTextRange?((i=t.createTextRange()).move("character",e),i.select()):t.selectionStart&&(t.focus(),t.setSelectionRange(e,e))},changeType:function(t,e){try{return t.type=e,!0}catch(t){return!1}}}}}(this),function(t){"use strict";function e(){}function r(){try{return document.activeElement}catch(t){}}function l(t,e){var i=!!e&&t.value!==e,e=t.value===t.getAttribute(k);return(i||e)&&"true"===t.getAttribute(x)&&(t.removeAttribute(x),t.value=t.value.replace(t.getAttribute(k),""),t.className=t.className.replace($,""),e=t.getAttribute(E),0<=parseInt(e,10)&&(t.setAttribute("maxLength",e),t.removeAttribute(E)),(e=t.getAttribute(C))&&(t.type=e),!0)}function h(t){var e=t.getAttribute(k);return!(""!==t.value||!e)&&(t.setAttribute(x,"true"),t.value=e,t.className+=" "+w,t.getAttribute(E)||(t.setAttribute(E,t.maxLength),t.removeAttribute("maxLength")),t.getAttribute(C)?t.type="text":"password"===t.type&&F.changeType(t,"text")&&t.setAttribute(C,"password"),!0)}function i(t,e){var i,n,s,a,o;if(t&&t.getAttribute(k))e(t);else for(n=t?t.getElementsByTagName("input"):d,s=t?t.getElementsByTagName("textarea"):u,o=0,a=(i=n?n.length:0)+(s?s.length:0);o<a;o++)e(o<i?n[o]:s[o-i])}function c(t){i(t,l)}function n(t){var e,i,n,s,a,o;t.form&&("string"==typeof(m=t.form)&&(m=document.getElementById(m)),m.getAttribute(T)||(F.addEventListener(m,"submit",(o=m,function(){c(o)})),m.setAttribute(T,"true"))),F.addEventListener(t,"focus",(a=t,function(){p&&a.value===a.getAttribute(k)&&"true"===a.getAttribute(x)?F.moveCaret(a,0):l(a)})),F.addEventListener(t,"blur",(s=t,function(){h(s)})),p&&(F.addEventListener(t,"keydown",(n=t,function(t){return f=n.value,"true"===n.getAttribute(x)&&f===n.getAttribute(k)&&F.inArray(D,t.keyCode)?(t.preventDefault&&t.preventDefault(),!1):void 0})),F.addEventListener(t,"keyup",(i=t,function(){l(i,f),""===i.value&&(i.blur(),F.moveCaret(i,0))})),F.addEventListener(t,"click",(e=t,function(){e===r()&&e.value===e.getAttribute(k)&&"true"===e.getAttribute(x)&&F.moveCaret(e,0)}))),t.setAttribute(S,"true"),t.setAttribute(k,g),!p&&t===r()||h(t)}var d,u,p,s,f,g,a,m,o,v,y,b=["text","search","url","tel","email","password","number","textarea"],D=[27,33,34,35,36,37,38,39,40,8,46],w="placeholdersjs",$=RegExp("(?:^|\\s)"+w+"(?!\\S)"),k="data-placeholder-value",x="data-placeholder-active",C="data-placeholder-type",T="data-placeholder-submit",S="data-placeholder-bound",E="data-placeholder-maxlength",A=document.createElement("input"),M=document.getElementsByTagName("head")[0],P=document.documentElement,U=t.Placeholders,F=U.Utils;if(U.nativeSupport=void 0!==A.placeholder,!U.nativeSupport){for(d=document.getElementsByTagName("input"),u=document.getElementsByTagName("textarea"),p="false"===P.getAttribute("data-placeholder-focus"),s="false"!==P.getAttribute("data-placeholder-live"),(A=document.createElement("style")).type="text/css",P=document.createTextNode("."+w+" { color:#ccc; }"),A.styleSheet?A.styleSheet.cssText=P.nodeValue:A.appendChild(P),M.insertBefore(A,M.firstChild),y=0,v=d.length+u.length;y<v;y++)o=d.length>y?d[y]:u[y-d.length],(g=o.attributes.placeholder)&&((g=g.nodeValue)&&F.inArray(b,o.type)&&n(o));a=setInterval(function(){for(y=0,v=d.length+u.length;y<v;y++)o=d.length>y?d[y]:u[y-d.length],(g=o.attributes.placeholder)?(g=g.nodeValue)&&F.inArray(b,o.type)&&(o.getAttribute(S)||n(o),g===o.getAttribute(k)&&("password"!==o.type||o.getAttribute(C))||("password"===o.type&&!o.getAttribute(C)&&F.changeType(o,"text")&&o.setAttribute(C,"password"),o.value===o.getAttribute(k)&&(o.value=g),o.setAttribute(k,g))):o.getAttribute(x)&&(l(o),o.removeAttribute(k));s||clearInterval(a)},100)}F.addEventListener(t,"beforeunload",function(){U.disable()}),U.disable=U.nativeSupport?e:c,U.enable=U.nativeSupport?e:function(t){i(t,h)}}(this),function(t){"use strict";var n=t.fn.val,i=t.fn.prop;Placeholders.nativeSupport||(t.fn.val=function(t){var e=n.apply(this,arguments),i=this.eq(0).data("placeholder-value");return void 0===t&&this.eq(0).data("placeholder-active")&&e===i?"":e},t.fn.prop=function(t,e){return void 0===e&&this.eq(0).data("placeholder-active")&&"value"===t?"":i.apply(this,arguments)})}(jQuery),function(n){n.event.special.textchange={setup:function(t,e){n(this).data("lastValue","true"===this.contentEditable?n(this).html():n(this).val()),n(this).bind("keyup.textchange input.textchange change.textchange",n.event.special.textchange.handler),n(this).bind("cut.textchange paste.textchange",n.event.special.textchange.delayedHandler)},teardown:function(t){n(this).unbind(".textchange")},handler:function(t){n.event.special.textchange.triggerIfChanged(n(this))},delayedHandler:function(t){var e=n(this);setTimeout(function(){n.event.special.textchange.triggerIfChanged(e)},10)},triggerIfChanged:function(t){var e="true"===t[0].contentEditable?t.html():t.val(),i=t.data("lastValue");e!==i&&(t.trigger("textchange",[i,e]),t.data("lastValue",e))}},n.event.special.hastext={setup:function(t,e){n(this).bind("textchange",n.event.special.hastext.handler)},teardown:function(t){n(this).unbind("textchange",n.event.special.hastext.handler)},handler:function(t,e,i){""===e&&e!==i&&n(this).trigger("hastext")}},n.event.special.notext={setup:function(t,e){n(this).bind("textchange",n.event.special.notext.handler)},teardown:function(t){n(this).unbind("textchange",n.event.special.notext.handler)},handler:function(t,e,i){""===n(this).val()&&i!==e&&n(this).trigger("notext")}}}(jQuery),function(a){"use strict";var o=function(){o.prototype.initialize.apply(this,arguments)};o.DEFAULTS={source:[],item:"<p></p>",menu:'<div class="suggestions"></div>',minLength:1,limit:5,highlightReplace:null,delay:200},o.RegexEscapePattern=/[\-\[\]{}()*+?.,\\\^$|#\s]/g,o.RegexEscapeReplace="\\$&",o.prototype.initialize=function(t,e){this.element=a(t),this.options=e,this.menu=a(this.options.menu),this.lastValue=null,this.hasItems=this.hovered=this.focused=this.disabled=this.shown=!1,this.cache=[],this.listen()},o.prototype.enable=function(){this.disabled&&this.listen(),this.disabled=!1},o.prototype.disable=function(){this.disabled=!0,this.element.trigger("blur"),this.element.off(".qs"),this.menu.off(".qs"),this.close()},o.prototype.open=function(){var t=this.element.position(),e=this.element[0].offsetHeight;this.menu.insertAfter(this.element).css({top:t.top+e,left:t.left}).show(),this.shown=!0},o.prototype.close=function(){this.shown=!1,this.menu.hide()},o.prototype.listen=function(){this.element.on("focus.qs",a.proxy(this.focus,this)).on("blur.qs",a.proxy(this.blur,this)).on("keydown.qs",a.proxy(this.keydown,this)).on("keyup.qs",a.proxy(this.keyup,this)).on("change.qs",a.proxy(this.search,this)),this.menu.on("mouseenter.qs",a.proxy(this.mouseenter,this)).on("mouseleave.qs",a.proxy(this.mouseleave,this)).on("click.qs",".items a",a.proxy(this.click,this)).on("mouseenter.qs mouseleave.qs",".item",a.proxy(this.mouseoveritem,this))},o.prototype.flush=function(){this.cache=[],this.lastValue=null},o.prototype.clear=function(){this.hasItems=!1,this.menu.empty()},o.prototype.focus=function(){this.focused=!0},o.prototype.blur=function(){this.focused=!1,this.shown&&!this.hovered&&this.close()},o.prototype.move=function(t){var e=this.menu.find(".item"),i=e.filter(".active").removeClass("active"),i=e.index(i);i+=t;t=e.length-1;i<0?this.element.trigger("hintreject"):(t<i&&(i=0),(t={}).item=e.eq(i).addClass("active"),this.element.trigger("hintchange",[t]))},o.prototype.highlight=function(t,i){var n=this;t.each(function(){var t=a(this),e=t.contents().filter(function(){return 3===this.nodeType}).text(),e=n.highlightItem(e,i,n.options.highlightReplace);t.contents().filter(function(){return 3===this.nodeType}).filter(":first").html(e)})},o.prototype.highlightItem=function(t,e,i){e=e.replace(o.RegexEscapePattern,o.RegexEscapeReplace);e=new RegExp("("+e+")","ig");return t.replace(e,i)},o.prototype.keydown=function(t){if(this.shown&&!(t.ctrlKey||t.altKey||t.metaKey)){switch(t.keyCode){case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.move(-1);break;case 40:t.preventDefault(),this.move(1)}t.stopPropagation()}},o.prototype.keyup=function(t){if(!(t.ctrlKey||t.altKey||t.metaKey)){switch(t.keyCode){case 40:!this.shown&&this.hasItems?this.open():this.shown||this.hasItems||""==this.element.val()||this.search(t);break;case 38:case 16:case 17:case 18:break;case 13:if(!this.shown)return;this.select();break;case 9:if(!this.shown)return;break;case 27:if(!this.shown)return;this.close();break;default:this.search(t)}t.stopPropagation(),t.preventDefault()}},o.prototype.mouseenter=function(t){this.hovered=!0},o.prototype.mouseleave=function(t){this.hovered=!1,this.shown&&!this.focused&&this.close()},o.prototype.mouseoveritem=function(t){this.menu.find(".item.active").removeClass("active"),"mouseenter"==t.type&&a(t.currentTarget).addClass("active")},o.prototype.click=function(t){t.preventDefault(),a(t.currentTarget).is(".item.active")&&this.select()},o.prototype.search=function(t){var e=this.element.val();if(null===this.lastValue||e!==this.lastValue){var i=a.trim(e+"");if(""===i)return this.shown&&this.close(),void(this.lastValue=null);this.lastValue=e,0<this.options.minLength&&i&&i.length<this.options.minLength?this.shown&&this.close():(this._preventOpen=t&&"change"==t.type,t={query:i},void 0!==this.cache[i]?this.process(t,this.cache[i]):a.isFunction(this.options.source)&&this.options.source.call(this,t,a.proxy(this.process,this,t)))}},o.prototype.process=function(t,e){e=a(e||a()),this.cache[t.query]=e,this.clear();var i=e.find(".item");this.options.highlightReplace&&this.highlight(i,t.query),this.menu.append(e),this.hasItems=0<i.length,this.hasItems?this._preventOpen||this.open():this.close(),this._preventOpen=!1},o.prototype.select=function(){var t,e=this.menu.find(".item.active");e.length?((t={}).item=e,this.element.trigger("hintselect",[t])):(this.close(),this.element.closest("form").trigger("submit"))};var t=a.fn.quicksearch;a.fn.quicksearch=function(n,s){return this.each(function(){var t,e=a(this),i=e.data("quicksearch");i||(t=a.extend({},o.DEFAULTS,e.data(),"object"==typeof n&&n),i=new o(this,t),e.data("quicksearch",i)),"string"==typeof n&&i[n](s)})},a.fn.quicksearch.Constructor=o,a.fn.noConflict=function(){return a.fn.quicksearch=t,this}}(jQuery);var DateUtils={};function Pagination(t,e,i){this.url=t,this.$container=i,this.itemsPerPage=null,this.requestParams=e||{},this.isLoading=!1,this.deferred=$.Deferred(),this.paginationData={from:0,to:null},this._render()}DateUtils.AddDate=function(t,e){t.setDate(t.getDate()+e)},DateUtils.AddMonth=function(t,e){var i=t.getDate();t.setDate(1),t.setMonth(t.getMonth()+e),i=Math.min(DateUtils.GetMaxDays(t),i),t.setDate(i)},DateUtils.GetMaxDays=function(t){t=new Date(t.getFullYear(),t.getMonth()+1,1);return t.setDate(0),t.getDate()},DateUtils.GetFirstDayOfWeek=function(t){t=new Date(t.getTime());return t.setDate(1),DateUtils.GetDayOfWeek(t)},DateUtils.GetDayOfWeek=function(t){return t.getDay()-1<0?6:t.getDay()-1},DateUtils.MonthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],DateUtils.MonthNamesShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DateUtils.DayNames=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],DateUtils.DayNamesShort=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],I18N&&I18N.DateTime&&(I18N.DateTime.MonthNames&&(DateUtils.MonthNames=I18N.DateTime.MonthNames.slice()),I18N.DateTime.MonthNamesShort&&(DateUtils.MonthNamesShort=I18N.DateTime.MonthNamesShort.slice()),I18N.DateTime.DayNames&&(DateUtils.DayNames=I18N.DateTime.DayNames.slice()),I18N.DateTime.DayNamesShort&&(DateUtils.DayNamesShort=I18N.DateTime.DayNamesShort.slice())),DateUtils.FormatDate=function(e,t,i){return(t=t||"%d %m %Y").replace(/%[a-z]/gi,function(t){t=DateUtils.DateFormats[t[1]];return t&&t.call(DateUtils.DateFormats,e,i)||""})},DateUtils.DateFormats={j:function(t,e){return t[this._func("Date",e)]()},l:function(t,e){e=t[this._func("Day",e)]();return DateUtils.DayNamesShort[e]},d:function(t,e){e=t[this._func("Date",e)]();return(e<10?"0":"")+e},M:function(t,e){e=t[this._func("Month",e)]();return DateUtils.MonthNamesShort[e]},F:function(t,e){e=t[this._func("Month",e)]();return DateUtils.MonthNames[e]},m:function(t,e){e=t[this._func("Month",e)]()+1;return(e<10?"0":"")+e},Y:function(t,e){return t[this._func("FullYear",e)]()},_func:function(t,e){return(e?"getUTC":"get")+t}},DateUtils.ParseSqlDate=function(t){if("string"!=typeof t||!t.length)return null;t=t.match(/^(\d{4})-(\d{1,2})-(\d{1,2})$/);if(!t)return null;t=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10));return new Date(t)},DateUtils.ParseSqlDatetime=function(t){if("string"!=typeof t||!t.length)return null;t=t.match(/^(\d{4})-(\d{1,2})-(\d{1,2})\s(\d{1,2}):(\d{1,2}):(\d{1,2})$/);if(!t)return null;t=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),parseInt(t[6],10));return new Date(t)},function(p){"use strict";var a=function(t,e){this.$element=p(t),this.options=e,this.$element.addClass("mode-"+this.options.mode),this.current=new Date(a.TodayYear,a.TodayMonth,1),this.selected={},this.sliding=!1,this.redraw(),this.registerEvents()};(window.DatePicker=a).SELECT_MODES={single:"single",multiple:"multiple",range:"range"},a.DEFAULTS={mode:a.SELECT_MODES.single,speed:400,dayNamesShort:DateUtils.DayNamesShort.slice(),monthNames:DateUtils.MonthNames.slice()},a.Today=new Date,a.TodayYear=a.Today.getFullYear(),a.TodayMonth=a.Today.getMonth(),a.TodayDate=a.Today.getDate(),a.prototype.render=function(t,e){var i,n=new Date(t,e,1),s=DateUtils.GetFirstDayOfWeek(n),a=DateUtils.GetMaxDays(n),o=0,r='<table cellpadding="0" cellspacing="0"><thead>';r+='<tr class="controls"><th class="prev">&lsaquo;</th><th colspan="5" class="month">'+this.getMonthName(e)+" "+t+'</th><th class="next">&rsaquo;</th>',r+='<tr class="weekdays">';for(var l=0;l<7;l++)r+="<th>"+this.getWeekDayName(l)+"</th>";if(r+="</tr></thead>",r+="<tbody>",0!=s){r+="<tr>",o++;n=new Date(n.getTime());DateUtils.AddMonth(n,-1);for(var h=DateUtils.GetMaxDays(n),c=h-s+1;c<=h;c++)r+='<td class="inactive">'+c+"</td>"}for(c=0;c<a;c++)(s+c)%7==0&&(r+="</tr><tr>",o++),i=c+1,r+='<td class="'+this.getCellClass(t,e,i)+'">'+i+"</td>";if((s+c)%7!=0){var d=7-(s+c)%7;for(c=1;c<=d;c++)r+='<td class="inactive">'+c+"</td>"}for(;o<6;o++){r+="</tr><tr>";for(var u=0;u<7;u++)r+='<td class="inactive">'+(c+u)+"</td>"}return p(r='<div class="dp-wrap">'+(r+="</tr></tbody>")+"</div>")},a.prototype.setCurrent=function(t){var e=!1;this.current.getFullYear()!=t.getFullYear()&&this.current.getMonth()!=t.getMonth()&&(e=!0),this.current=new Date(t.getFullYear(),t.getMonth(),1),e&&this.redraw()},a.prototype.redraw=function(){var t=this.current;this.$table=this.render(t.getFullYear(),t.getMonth()).appendTo(this.$element.empty())},a.prototype.update=function(){var e=this,i=this.current.getFullYear(),n=this.current.getMonth();this.$table.find("td.day").each(function(){var t=parseInt(this.innerHTML,10),t=e.isSelected(i,n,t);p(this).toggleClass("selected",!0===t)})},a.prototype.getCellClass=function(t,e,i){var n=["day"];return t==a.TodayYear&&e==a.TodayMonth&&i==a.TodayDate&&n.push("today"),this.isSelected(t,e,i)&&n.push("selected"),n.join(" ")},a.prototype.getWeekDayName=function(t){return this.options.dayNamesShort[t]||""},a.prototype.getMonthName=function(t){return this.options.monthNames[t]||""},a.prototype.getDayCell=function(t,e,i){var n=p();if(!this.$table)return n;var s=this.current;if(s.getFullYear()!=t&&s.getMonth()!=e)return n;e=Math.floor(i/7),i%=7;return n=this.$table.find("tbody tr").eq(e).find("td").eq(i)},a.prototype.next=function(){this.sliding||(DateUtils.AddMonth(this.current,1),this.slide(1))},a.prototype.prev=function(){this.sliding||(DateUtils.AddMonth(this.current,-1),this.slide(-1))},a.prototype.slide=function(t){var e=this.current.getFullYear(),i=this.current.getMonth(),i=this.render(e,i),n=this.$table,t=t<0?"right":"left";this.sliding=!0,i.addClass("in "+t),this.$table=i.appendTo(this.$element),n[0].offsetWidth,this.$element.addClass(t).addClass("sliding");var s=this;p.support.transition?this.$table.one(p.support.transition.end,function(t){s.slideEnd(n)}).emulateTransitionEnd(this.options.speed):s.slideEnd(n)},a.prototype.slideEnd=function(t){t.remove(),this.$element.removeClass("sliding left right"),this.$table.removeClass("left right in"),this.sliding=!1},a.prototype.registerEvents=function(){var i=this;this.$element.on("click","td.day",function(t){t.preventDefault();t=i.current;i.click(t.getFullYear(),t.getMonth(),parseInt(this.innerHTML))}).on("click","thead .next",function(){i.next()}).on("click","thead .prev",function(){i.prev()}),i.options.mode==a.SELECT_MODES.multiple&&this.$element.on("click",".weekdays th",function(){var t=p(this).parent().find("th").index(this),e=new Date(i.current.getTime());e.setDate(1),i.toggleWeekDay(t,e),i.update()}),i.options.mode!=a.SELECT_MODES.single&&this.$element.on("click","thead .month",function(){var t;i.sliding||(t=new Date(i.current.getTime()),i.options.mode==a.SELECT_MODES.range&&i.reset(),i.toggleMonth(t),i.update(),i.notify())}),this.$element.parent().is(".dropdown-menu")&&this.$element.on("click",function(t){if(!t.isDefaultPrevented())return!1})},a.prototype.click=function(t,e,i){switch(this.options.mode){case a.SELECT_MODES.single:this.isSelected(t,e,i)||this.reset(),this.toggleSelected(t,e,i);break;case a.SELECT_MODES.multiple:this.toggleSelected(t,e,i);break;case a.SELECT_MODES.range:this.rangeDate?this.rangeSelectEnd(t,e,i):this.rangeSelectBegin(t,e,i)}this.update(),this.notify()},a.prototype.notify=function(){this.$element.trigger("change")},a.prototype.toggleSelected=function(t,e,i,n){t=this.selected[t]=this.selected[t]||{},e=t[e]=t[e]||{};e[i]=void 0===n?!e[i]:n},a.prototype.isSelected=function(t,e,i){var n=this.selected;return n[t]&&n[t][e]&&n[t][e][i]},a.prototype.reset=function(){this.selected={}},a.prototype.getValue=function(){return this.selected},a.prototype.setValue=function(t){this.selected=t,this.redraw(),this.notify()},a.prototype.setRangeValue=function(t,e){e=e||t,this.rangeSelectBegin(t.getFullYear(),t.getMonth(),t.getDate());var i=!1;this.rangeDate&&(t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),12),this.rangeDate.getTime()==t.getTime()&&(i=!0)),i?delete this.rangeDate:this.rangeSelectEnd(e.getFullYear(),e.getMonth(),e.getDate()),this.redraw(),this.notify()},a.prototype.getRangeValue=function(){var t,e,i,n,s=this.selected;for(i in s)for(var a in s[i])for(var o in s[i][a])s[i][a][o]&&(n=new Date(i,a,o,12),(!t||t>n.getTime())&&(t=n.getTime()),(!e||e<n.getTime())&&(e=n.getTime()));return[t?new Date(t):null,e?new Date(e):null]},a.prototype.toggleWeekDay=function(t,e){t=1+t-DateUtils.GetFirstDayOfWeek(e);t<1&&(t+=7);for(var i=e.getFullYear(),n=e.getMonth(),s=DateUtils.GetMaxDays(e),a=!1,o=t;o<=s;o+=7)if(!this.isSelected(i,n,o)){a=!0;break}for(o=t;o<=s;o+=7)this.toggleSelected(i,n,o,a)},a.prototype.toggleMonth=function(t){t.setDate(1);for(var e=DateUtils.GetMaxDays(t),i=!1,n=t.getFullYear(),s=t.getMonth(),a=1;a<=e;a++)if(!this.isSelected(n,s,a)){i=!0;break}for(a=1;a<=e;a++)this.toggleSelected(n,s,a,i)},a.prototype.toggleWeek=function(t,e){var i=DateUtils.GetFirstDayOfWeek(e),n=DateUtils.GetMaxDays(e),s=Math.max(1,7*t-i+1),a=Math.min(n,7*t+7-i);if(!(a<s)){for(var o=e.getMonth(),r=e.getFullYear(),l=!1,h=s;h<=a;h++)if(!this.isSelected(r,o,h)){l=!0;break}for(h=s;h<=a;h++)this.toggleSelected(r,o,h,l)}},a.prototype.rangeSelectBegin=function(t,e,i){this.reset();var n=new Date(t,e,i,12);this.rangeDate=n,this.toggleSelected(t,e,i)},a.prototype.rangeSelectEnd=function(t,e,i){var n=new Date(t,e,i,12),e=this.rangeDate.getTime(),s=n.getTime();if(delete this.rangeDate,this.reset(),e!=s)for(s<e&&(i=e,e=s,s=i),n=new Date(e);n.getTime()<=s;)this.toggleSelected(n.getFullYear(),n.getMonth(),n.getDate(),!0),DateUtils.AddDate(n,1)},a.DatePickerValueToDate=function(t){for(var e in t)for(var i in t[e])for(var n in t[e][i])return new Date(e,i,n);return null},a.DateToDatePickerValue=function(t){var e=t.getFullYear(),i=t.getMonth(),n=t.getDate(),t={};return t[e]={},t[e][i]={},t[e][i][n]=!0,t};var t=p.fn.datepick;p.fn.datepick=function(n,s){return this.each(function(){var t,e=p(this),i=e.data("datepicker");i||(t=p.extend({},a.DEFAULTS,e.data(),"object"==typeof n&&n),i=new a(this,t),e.data("datepicker",i)),"string"==typeof n&&i[n](s)})},p.fn.datepick.Constructor=a,p.fn.noConflict=function(){return p.fn.datepick=t,this}}(jQuery),function(o){"use strict";function a(t,e){this.$element=o(t),this._initOptions(e),this._initPropertyValues(),this.$element.addClass("monthpicker"),(window.m=this).redraw(),this.update(),this.listen()}(window.MonthPicker=a).Today=new Date,a.DEFAULTS={min:null,max:null,display:null,selected:null,allowNull:!0,monthNames:DateUtils.MonthNamesShort.slice()},a.prototype._parseToDate=function(t){var e=null;if(t instanceof Date)e=t;else if("string"==typeof t){var i=t.split("-");if(i.length<2)return e;var n=parseInt(i[0]),i=parseInt(i[1])-1,e=new Date(n,i)}else t&&t.year&&t.month&&(n=parseInt(t.year),i=parseInt(t.month),e=new Date(n,i));return e},a.prototype._initOptions=function(t){var e;t.min&&(e=this._parseToDate(t.min))&&(t.min=e),t.max&&(e=this._parseToDate(t.max))&&(t.max=e),t.display&&((e=this._parseToDate(t.display))?t.display=e:1970<=parseInt(t.display,10)&&(t.display=new Date(parseInt(t.display),0))),t.selected&&(e=this._parseToDate(t.selected))&&(t.selected=e),this.options=t},a.prototype._initPropertyValues=function(){this.selected=this.options.selected,this.options.display?this.display=this.options.display:this.selected?this.display=new Date(this.selected.getTime()):this.display=this.options.min||a.Today},a.prototype.listen=function(){var i=this;this.$element.on("click",".control",function(){var t,e;o(this).is(".disabled")||(t=o(this).is(".prev")?-1:1,(e=new Date(i.display.getTime())).setMonth(0),e.setFullYear(e.getFullYear()+t),i.display=e,i.update())}),this.$element.on("click",".month",function(t){o(this).is(".disabled")||(t.preventDefault(),t=i.$element.find(".month").index(this),t=new Date(i.display.getFullYear(),t),i.setValue(t))}),this.$element.parent().is(".dropdown-menu")&&this.$element.on("click",function(t){if(!t.isDefaultPrevented())return!1})},a.prototype.show=function(t){t=this._parseToDate(t);t&&(this.display=t,this.update())},a.prototype.render=function(){var t="<div>";t+='<div class="controls">',t+='<i class="control prev">&lsaquo;</i>',t+='<div class="year"></div>',t+='<i class="control next">&rsaquo;</i>',t+="</div>",t+='<ul class="months clearfix">';for(var e=0;e<12;e++)t+='<li class="month">'+this.options.monthNames[e]+"</li>";return t+="</ul>",t+="</div>"},a.prototype.update=function(){var e=this,i=this.display.getFullYear();this.$element.find(".year").text(i);this.$element.find(".month").each(function(t){t=e.getStates(i,t);o(this).removeClass("selected today disabled").addClass(t.join(" "))});var t,n=this.$element.find(".control"),s=this.options.min,a=this.options.max;s&&((t=new Date(this.display.getTime())).setMonth(11),t.setFullYear(t.getFullYear()-1),n.filter(".prev").toggleClass("disabled",this._compare(t,s)<0)),a&&((s=new Date(this.display.getTime())).setMonth(0),s.setFullYear(s.getFullYear()+1),n.filter(".next").toggleClass("disabled",0<this._compare(s,a)))},a.prototype.redraw=function(){o(this.render()).appendTo(this.$element.empty())},a.prototype.getStates=function(t,e){var i=[],n=new Date(t,e),t=a.Today;0===this._compare(n,t)&&i.push("today");e=this.options.min,t=this.options.max;(e&&this._compare(n,e)<0||t&&0<this._compare(n,t))&&i.push("disabled");t=this.selected;return t&&0===this._compare(n,t)&&i.push("selected"),i},a.prototype._compare=function(t,e){var i=t.getFullYear()-e.getFullYear();return 0!=i?i:i=t.getMonth()-e.getMonth()},a.prototype.getValue=function(){return this.selected&&new Date(this.selected.getTime())},a.prototype.setValue=function(t){t=this._parseToDate(t);t?(this.selected=t,this.update(),this.notify()):null===t&&this.options.allowNull&&(this.selected=null,this.notify())},a.prototype.notify=function(){this.$element.trigger("change",[this.getValue()])};var t=o.fn.monthpick;o.fn.monthpick=function(n){var s=Array.prototype.slice.call(arguments,1);return this.each(function(){var t,e=o(this),i=e.data("monthpick");i||(t=o.extend({},a.DEFAULTS,e.data(),"object"==typeof n&&n),i=new a(this,t),e.data("monthpick",i)),"string"==typeof n&&i[n].apply(i,s)})},o.fn.monthpick.Constructor=a,o.fn.noConflict=function(){return o.fn.monthpick=t,this}}(jQuery),function(r){"use strict";function s(t,e){this.$element=t,this.options=e,this.refresh(),this.listen()}s.DEFAULT_OPTIONS={itemSelector:".carousel-item",circular:!0,controls:null,pager:null,speed:400},s.prototype.listen=function(){var e=this;this.$element.on("slidechange.carousel",function(){e.updateControls(),e.updatePager()}),this.$controls&&this.$controls.length&&this.$controls.on("click.carousel",function(t){t.preventDefault();t=r(this);return t.is(".next")||"next"==t.data("slidedir")?e.next():!t.is(".prev")&&"prev"!=t.data("slidedir")||e.prev(),!1}),this.$pager&&this.$pager.length&&this.$pager.on("click",".item",function(t){t.preventDefault();t=r(this).parent().children().index(this);return e.change(t),!1})},s.prototype.refresh=function(){this.sliding=!1,this.$items=this.$element.find(".carousel-item"),this.$pager=this.options.pager||this.$element.find(".carousel-pager"),this.$controls=this.options.controls||this.$element.find(".carousel-ctrl"),this.updateControls()},s.prototype.getActiveIndex=function(){var t=this.$items.filter(".active");return t.length?this.$items.index(t):0},s.prototype.next=function(){var t=this.getActiveIndex()+1;if(this.$items.length-1<t){if(!this.options.circular)return;t=0}this.change(t,1)},s.prototype.prev=function(){var t=this.getActiveIndex(),e=this.$items.length,t=t-1;if(t<0){if(!this.options.circular)return;t=e-1}this.change(t,-1)},s.prototype.change=function(t,e){var i,n,s,a,o=this.$items.length;this.sliding||o<=1||o-1<t||t<0||(i=this.getActiveIndex())!=t&&(n=this.$items.eq(i),o=this.$items.eq(t),this.$element.is(".slide")&&r.support.transition&&(s=r.support.transition),this.sliding=!0,e=0<(e=e||(i<t?1:-1))?"left":"right",o.addClass("in "+e),s&&(o[0].offsetWidth,this.$element.addClass("sliding")),n.addClass(e),s?(this.unselectActiveSlidePage(),a=this,n.one(r.support.transition.end,function(){a.changeEnd()}).emulateTransitionEnd(this.options.speed)):this.changeEnd())},s.prototype.changeEnd=function(){this.$element.removeClass("sliding"),this.$items.filter(".active").removeClass("active left right"),this.$items.filter(".in").removeClass("in left right").addClass("active"),this.sliding=!1,this.notifyChange()},s.prototype.notifyChange=function(){this.$element.trigger("slidechange.carousel",[this])},s.prototype.unselectActiveSlidePage=function(){this.$pager&&this.$pager.length&&this.$pager.find(".active").removeClass("active")},s.prototype.updatePager=function(){var t;this.$pager&&this.$pager.length&&(t=this.getActiveIndex(),this.unselectActiveSlidePage(),this.$pager.children().eq(t).addClass("active"))},s.prototype.updateControls=function(){var t;this.options.circular||this.$items.length<2||(t=this.getActiveIndex(),this.$controls.filter(".prev").toggleClass("disabled",0==t),this.$controls.filter(".next").toggleClass("disabled",t==this.$items.length-1))};var t=r.fn.carousel;r.fn.carousel=function(n){return this.each(function(){var t,e=r(this),i=e.data("carousel");i||(t=r.extend({},s.DEFAULT_OPTIONS,e.data(),"object"==typeof n&&n),i=new s(e,t),e.data("carousel",i)),"string"==typeof n&&i[n]()})},r.fn.carousel.Constructor=s,r.fn.noConflict=function(){return r.fn.carousel=t,this}}(jQuery),Pagination.prototype.init=function(){return this._loadPage(),this.deferred.promise()},Pagination.prototype._render=function(){this.$container.append('<div class="pagination hidden"><a class="btn btn-pagination prev"><img src="/images/ajax-loader-small.gif" class="hidden loader" /><span>‹</span></a><a class="btn btn-pagination next"><img src="/images/ajax-loader-small.gif" class="hidden loader" /><span>›</span></a></div>');var e=this;this.$container.on("click",".btn-pagination",function(t){if(t.preventDefault(),e.isLoading)return!1;e.isLoading=!0;t=$(this);t.find(".loader, span").toggleClass("hidden"),t.hasClass("next")?e._loadNextPage():e._loadPreviousPage()})},Pagination.prototype._loadNextPage=function(){this.paginationData.to<this.paginationData.total&&(this.paginationData.from+=this.itemsPerPage,this.paginationData.to+=this.itemsPerPage,this._loadPage())},Pagination.prototype._loadPreviousPage=function(){var t;0<this.paginationData.from&&(t=this.itemsPerPage,this.paginationData.from<this.itemsPerPage&&(t=this.paginationData.from),this.paginationData.from-=t,this.paginationData.to-=this.itemsPerPage,this._loadPage())},Pagination.prototype._loadPage=function(){var n=this,t=$.extend({},this.paginationData,this.requestParams);MakeRequest(this.url,t).done(function(t){n.isLoading=!1,n.$container.find(".btn-pagination .loader").addClass("hidden"),n.$container.find(".btn-pagination span").removeClass("hidden"),n.paginationData.to=parseInt(t.to,10),n.paginationData.from=parseInt(t.from,10),n.paginationData.total=parseInt(t.total,10);var e=n.paginationData.to-n.paginationData.from;n.itemsPerPage||(n.itemsPerPage=e);var i=n.$container.find(".pagination");n.paginationData.total>n.itemsPerPage&&i.removeClass("hidden");e=n.paginationData.to>=n.paginationData.total;i.find(".btn-pagination.next").toggleClass("hidden",e);e=0==n.paginationData.from;i.find(".btn-pagination.prev").toggleClass("hidden",e),n.deferred.notify(t.items,n.paginationData.total)}).fail(function(t){n.deferred.reject(t)})},function(i){"use strict";i(document).ready(function(){var t,e=i("#searchbar-quicksearch");e.length&&(t={highlightReplace:'<span class="m">$&</span>',minLength:2,source:function(t,e){t={search:t.query};this.jqXhr&&this.jqXhr.abort(),this.jqXhr=MakeRequest("/api/quicksearch.php?types=places,events",t).done(function(t){t=i(t.html||"");e(t)})}},e.quicksearch(t).data("quicksearch").element.on("hintselect",function(t,e){e=e&&e.item,e=e&&e.attr("href");return e&&e.length&&(document.location.href=e),!1}))})}(jQuery,window),function(d,t){"use strict";var i,n,s={};(t.EventsFilter=s).initialize=function(){var t;n=d("#form-filter-events"),d(".toggle-events-filter").click(function(t){t.preventDefault();t=d(".filters-bar.events .lower-bar").is(":hidden");d(".filters-bar.events .lower-bar").toggleClass("expanded",t),d(".filter-toggled-marker").toggleClass("btn-secondary",!t).toggleClass("btn-muted",t),d(this).hasClass("btn")||d(this).parent().toggleClass("active")}),d(".period-shortcut").on("click",function(t){var e=d(this).data("period");s.setDatePickerPeriod(e),d(this).parent().parent().find(".period-shortcut").removeClass("active"),d(this).addClass("active")}),d(".filter-by-period").click(function(t){t.preventDefault(),ShowGlobalSpinner();t=d(this).data("period");s.setDatePickerPeriod(t),n.trigger("submit")}),d("#show-free-admission-only").click(function(t){var e,i=!this.checked;history.pushState&&(e=this.checked?"#freeAdmission":"#",history.pushState(null,null,e)),d(".tab-panel .no-free-admission").each(function(){d(this).toggle(i),0===d(this).siblings().filter(".free-admission").length&&d(this).parent().parent().toggle(i)})}),n.on("submit",function(t){t.preventDefault();var e=d("#show-free-admission-only:checked").val()||0;d("#is-free-admission").val(e);t=null;return d("#events-tabber").length?(e=d("#events-tabber>.active").data("tabtarget")||null)&&(t=e.substring(e.indexOf("-")+1)):d("#events-tab-select select").length&&(t=d("#events-tab-select select").val()),d("#filter-events-of-type").val(t),document.location.href=this.action+function(t){for(var e,i,n={},s="",a=0,o=t.elements.length;a<o;a++)i=t.elements[a],(e=i.getAttribute("name"))&&("string"==typeof(i=function(t){var e=t.tagName.toLowerCase(),i=[];"select"==e?i=d(t).val():void 0===t.value||!t.value.length||"checkbox"==t.getAttribute("type")&&!0!==t.checked||i.push(t.value);return i}(i))&&(i=[i]),i&&i.length&&(n[e]||(n[e]=[]),Array.prototype.push.apply(n[e],i)));var r,l=[];for(e in n){r=[];for(var h=0,c=n[e].length;h<c;h++)r.push(encodeURIComponent(n[e][h]));r.length&&l.push(encodeURIComponent(e)+"="+r.join(","))}(s=l.join("&")).length&&(s="?"+s);return s}(this),!1}),t=n.find(".datepicker"),i=t.datepick().data("datepicker"),t.on("change",function(){var t=d(this).data("datepicker");d("#datepicker-value").val(function(t){if("object"!=typeof t)return t;var e,i=[];for(e in t){var n,s=t[e],a=[];for(n in s){var o,r=s[n],l=[],h=[];for(o in r)!0===r[o]&&(h[o]=!0);for(var c,d=-1,u=0,p={},f=1,g=h.length;f<=g;f++)h[f]?d<0?(u=0,d=f):u++:!h[f]&&0<=d&&(p[d]=u,d=-1);for(c in p)l.push(c+"."+p[c]);n=parseInt(n)+1,a.push(n+".("+l.join("-")+")")}a.length&&i.push(e+".("+a.join("-")+")")}return i.length?"("+i.join("-")+")":""}(t.getValue()));var e=t.getRangeValue(),i="&nbsp;";e[0]&&(t="%d %m %Y",i=DateUtils.FormatDate(e[0],t),e[1]&&e[0].getTime()!=e[1].getTime()&&(i+=" - "+DateUtils.FormatDate(e[1],t))),n.find(".date-period .fake-textbox").html(i)})},s.setDatePickerRange=function(t,e){i.setCurrent(t),i.setRangeValue(t,e)},s.setDatePickerPeriod=function(t){var e,i=new Date;switch(t){case"today":e=new Date(i.getTime());break;case"tomorrow":DateUtils.AddDate(i,1),e=new Date(i.getTime());break;case"current-week":n=i.getDay()||7,i.setDate(i.getDate()-n+1),e=new Date(i.getTime()),DateUtils.AddDate(e,6);break;case"next-week":n=i.getDay()||7,i.setDate(i.getDate()-n+8),e=new Date(i.getTime()),DateUtils.AddDate(e,6);break;case"weekend":var n=6-i.getDay();i.setDate(i.getDate()+n),(e=new Date(i.getTime())).setDate(e.getDate()+1);break;case"next-month":i.setDate(1),DateUtils.AddMonth(i,1),(e=new Date(i.getTime())).setDate(DateUtils.GetMaxDays(i));break;default:return}s.setDatePickerRange(i,e)},s.setDatePickerValue=function(t,e){try{1==arguments.length?"string"==typeof t&&s.setDatePickerPeriod(t):s.setDatePickerRange(t,e)}catch(t){}}}(jQuery,window),function(d){"use strict";var t,e={};function i(t){var e=d(".filters-bar.places .lower-bar"),i=d(".toggle-places-filter");void 0===t&&(t=e.is(":hidden")),e.toggleClass("expanded",t),i.toggleClass("btn-primary",!t).toggleClass("btn-muted",t)}function n(t){var e=d(".toggleable-map-wrapper");void 0===t&&(t="hidden"===e.css("visibility")),d(".toggle-map").toggleClass("btn-primary",!t).toggleClass("btn-muted",t),t?e.css("visibility","visible").css("height","auto"):e.css("visibility","hidden").css("height","0px"),d(".olControlScaleLine").toggle(t)}(window.PlacesFilter=e).initialize=function(){(t=d("#form-filter-places")).find("select.selectbox").selectbox(),t.find("select.selectbtn").selectbtn(),d(".toggle-places-filter").click(function(t){t.preventDefault(),n(!1),i()}),d(".toggle-map").click(function(t){t.preventDefault(),i(!1),n()}),t.on("submit",function(t){t.preventDefault();t=d(".tabber>.active").data("tabtarget"),t=t?t.substring(t.indexOf("-")+1):null;return d("#filter-places-of-type").val(t),document.location.href=this.action+function(t){for(var e,i,n={},s="",a=0,o=t.elements.length;a<o;a++)i=t.elements[a],(e=i.getAttribute("name"))&&("string"==typeof(i=function(t){var e=t.tagName.toLowerCase(),i=[];"select"==e?i=d(t).val():void 0===t.value||!t.value.length||"checkbox"==t.getAttribute("type")&&!0!==t.checked||i.push(t.value);return i}(i))&&(i=[i]),i&&i.length&&(n[e]||(n[e]=[]),Array.prototype.push.apply(n[e],i)));var r,l=[];for(e in n){r=[];for(var h=0,c=n[e].length;h<c;h++)r.push(encodeURIComponent(n[e][h]));r.length&&l.push(encodeURIComponent(e)+"="+r.join(","))}(s=l.join("&")).length&&(s="?"+s);return s}(this),!1})}}(jQuery);