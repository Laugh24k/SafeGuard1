!function(t){"use strict";var i=function(){i.prototype.initialize.apply(this,arguments)};i.Units=["date","month","year"];var e=new Date;e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i.DEFAULTS={unit:"date",active:null,current:new Date(e.getTime()),cellsCount:7,cellBuilder:null,minDateLimit:null,maxDateLimit:null,speed:500},i.prototype.initialize=function(i,e){this.element=t(i),this.options=e,this.sliding=!1,this.current=this.options.current;var n=t(this.draw()).appendTo(this.element.empty());this.wrapper=n.filter(".slider-wrap"),this.slide=this.render(this.current).appendTo(this.wrapper),this.checkControlStates(),this.listen()},i.prototype.draw=function(){var t="";return t+='<div class="slider-wrap"></div>',t+='<div class="control prev">&lsaquo;</div>',t+='<div class="control next">&rsaquo;</div>',t+='<div class="clear"></div>'},i.prototype.render=function(e){var n=new Date(e.getTime()),s=this.options.cellsCount,o=this.renderCell;t.isFunction(this.options.cellBuilder)&&(o=this.options.cellBuilder);for(var r=t('<div class="slide"><div class="slide-content"></div></div>'),a=r.find(".slide-content"),l=0;l<s;l++){l>0&&i.AddDateUnit(n,this.options.unit,1);var d=this.buildCellData(n),h=o.call(this,d);h=t(h).addClass("cell"),a.append(h)}return r.addClass("cells-num-"+this.options.cellsCount),r},i.prototype.buildCellData=function(t){var i=!1;this.options.active&&t.getTime()==this.options.active.getTime()&&(i=!0);var e=this.overMaxLimit(t)||this.overMinLimit(t);return{year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate(),datetime:t,active:i,disabled:e}},i.prototype.renderCell=function(i){return t("<div />")},i.prototype.next=function(){this.sliding||(i.AddDateUnit(this.current,this.options.unit,this.options.cellsCount),this.move(1))},i.prototype.prev=function(){this.sliding||(i.AddDateUnit(this.current,this.options.unit,-this.options.cellsCount),this.move(-1))},i.prototype.moveEnd=function(t){t.remove(),this.element.removeClass("sliding left right"),this.slide.removeClass("left right in"),this.sliding=!1},i.prototype.move=function(i){var e=this,n=this.render(this.current),s=this.slide,o=i<0?"right":"left";this.sliding=!0,this.element.trigger("change",[this]),this.checkControlStates(),n.addClass("in "+o),this.slide=n.appendTo(this.wrapper),s[0].offsetWidth,this.element.addClass(o).addClass("sliding"),t.support.transition?this.slide.one(t.support.transition.end,function(t){e.moveEnd(s)}).emulateTransitionEnd(this.options.speed):e.moveEnd(s)},i.AddDateUnit=function(t,i,e){"date"==i?t.setDate(t.getDate()+e):"month"==i?(t.setDate(1),t.setMonth(t.getMonth()+e)):"year"==i&&(t.setDate(1),t.setFullYear(t.getFullYear()+e))},i.prototype.listen=function(){var i=this;this.element.on("click",".control",function(e){e.preventDefault();var n=t(this);return n.is(".disabled")||(n.is(".prev")?i.prev():i.next()),!1})},i.prototype.overMinLimit=function(t){if(!this.options.minDateLimit)return!1;return t.getTime()<this.options.minDateLimit.getTime()},i.prototype.overMaxLimit=function(t){if(!this.options.maxDateLimit)return!1;return t.getTime()>this.options.maxDateLimit.getTime()},i.prototype.checkControlStates=function(){if(this.options.minDateLimit&&this.element.find(".control.prev").toggleClass("disabled",this.overMinLimit(this.current)),this.options.maxDateLimit){var t=new Date(this.current.getTime());i.AddDateUnit(t,this.options.unit,this.options.cellsCount),this.element.find(".control.next").toggleClass("disabled",this.overMaxLimit(t))}};var n=t.fn.dateslider;t.fn.dateslider=function(e){return this.each(function(){var n=t(this),s=n.data("dateslider");if(!s){var o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);s=new i(this,o),n.data("dateslider",s)}"string"==typeof e&&t.isFunction(s[e])&&s[e]()})},t.fn.dateslider.Constructor=i,t.fn.noConflict=function(){return t.fn.dateslider=n,this}}(jQuery);